package dogwin.net.check;import java.io.File;import java.io.InputStream;import java.net.HttpURLConnection;import java.net.URL;import android.app.AlertDialog;import android.app.AlertDialog.Builder;import android.app.ProgressDialog;import android.content.DialogInterface;import android.content.DialogInterface.OnClickListener;import android.content.Intent;import android.net.Uri;import android.os.Handler;import android.os.Message;import android.util.Log;import android.widget.Toast;import dogwin.net.apps.R;/*  * 从服务器获取xml解析并进行比对版本号   */  public class CheckVersionTask implements Runnable{  		private String TAG,versionname;		UpdataInfo info;	String UPDATA_CLIENT,GET_UNDATAINFO_ERROR;	    public void run() {          try {              //从资源文件获取服务器 地址               //String path = getResources().getString(R.string.serverurl);          	String path = R.string.serverurl;//getString(R.string.serverurl);        	//包装成url的对象               URL url = new URL(path);              HttpURLConnection conn =  (HttpURLConnection) url.openConnection();               conn.setConnectTimeout(5000);              InputStream is =conn.getInputStream();               info =  UpdataInfoParser.getUpdataInfo(is);                            if(info.getVersion().equals(versionname)){                  Log.i(TAG,"版本号相同无需升级");                  LoginMain();              }else{                  Log.i(TAG,"版本号不同 ,提示用户升级 ");                  Message msg = new Message();                  msg.what = UPDATA_CLIENT;                  handler.sendMessage(msg);              }          } catch (Exception e) {              // 待处理               Message msg = new Message();              msg.what = GET_UNDATAINFO_ERROR;              handler.sendMessage(msg);              e.printStackTrace();          }       }       }  