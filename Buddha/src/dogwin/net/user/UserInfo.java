package dogwin.net.user;import android.annotation.SuppressLint;import android.app.Activity;import android.app.Fragment;import android.content.SharedPreferences;import android.os.Bundle;import android.preference.EditTextPreference;import android.view.LayoutInflater;import android.view.View;import android.view.View.OnClickListener;import android.view.View.OnLongClickListener;import android.view.ViewGroup;import android.widget.Button;import android.widget.CheckBox;import android.widget.EditText;import android.widget.RadioButton;import android.widget.RadioGroup;import android.widget.Toast;import dogwin.net.apps.R;@SuppressLint("NewApi")public class UserInfo extends Fragment implements OnLongClickListener,OnClickListener{		View myFragmentView;		//check sharepreferences	public EditTextPreference editText;	public SharedPreferences preferences;	static String uc_username,uc_password;	static boolean uc_flag;		private int year;    private int month;    private int day;    static final int DATE_DIALOG_ID = 999;    		@Override	public void onAttach(Activity activity) {		// TODO Auto-generated method stub		super.onAttach(activity);		System.out.println("activity==>"+activity);			}		@Override	 public View onCreateView(LayoutInflater inflater, ViewGroup container,	   Bundle savedInstanceState) {		myFragmentView = inflater.inflate(R.layout.userinfo, container, false);	  	  return myFragmentView;	 }	@Override	public void onActivityCreated(Bundle savedInstanceState) {		// TODO Auto-generated method stub		super.onActivityCreated(savedInstanceState);		setRetainInstance(true);		Button changbt = (Button)myFragmentView.findViewById(R.id.changebt);		final EditText nickname = (EditText)myFragmentView.findViewById(R.id.nickname);		final RadioGroup rGroup = (RadioGroup)myFragmentView.findViewById(R.id.sex);		//password		final EditText oldps = (EditText)myFragmentView.findViewById(R.id.oldps);		final EditText newps = (EditText)myFragmentView.findViewById(R.id.newps);		final EditText renewps = (EditText)myFragmentView.findViewById(R.id.renewps);		//checkbox flag 		final CheckBox changepsFlag = (CheckBox)myFragmentView.findViewById(R.id.changepsFlag);		changepsFlag.setOnClickListener(new View.OnClickListener() {						@Override			public void onClick(View v) {				// TODO Auto-generated method stub				if(changepsFlag.isChecked()){					oldps.setEnabled(true);					newps.setEnabled(true);					renewps.setEnabled(true);				}else{					oldps.setEnabled(false);					newps.setEnabled(false);					renewps.setEnabled(false);				}			}		});				changbt.setOnClickListener(new View.OnClickListener() {						@Override			public void onClick(View v) {				// TODO Auto-generated method stub				//nickname 				String nicknameStr = nickname.getText().toString();				//sex				String sexStr = ((RadioButton)myFragmentView.findViewById(rGroup.getCheckedRadioButtonId())).getText().toString();				//password				String oldpsStr = oldps.getText().toString();				String newpsStr = newps.getText().toString();				String renewpsStr = renewps.getText().toString();				//error list				String error_nickname = getResources().getString(R.string.error_nickname);				String error_oldpsnull = getResources().getString(R.string.error_oldpsnull);				String error_oldpsfailed = getResources().getString(R.string.error_oldpsfailed);				String error_newpsnull = getResources().getString(R.string.error_newpsnull);				String error_renewps = getResources().getString(R.string.error_renewps);								if(nicknameStr.equals("")){					Toast.makeText(myFragmentView.getContext(), error_nickname, Toast.LENGTH_LONG).show();				}else if(changepsFlag.isChecked()){					if(oldpsStr.equals("")){						Toast.makeText(myFragmentView.getContext(), error_oldpsnull, Toast.LENGTH_LONG).show();					}else if(newpsStr.equals("")){						Toast.makeText(myFragmentView.getContext(), error_newpsnull, Toast.LENGTH_LONG).show();					}else if(!newpsStr.equals(renewpsStr)){						Toast.makeText(myFragmentView.getContext(), error_renewps, Toast.LENGTH_LONG).show();					}else if(!oldpsStr.equals(Rt_password())){						Toast.makeText(myFragmentView.getContext(), error_oldpsfailed, Toast.LENGTH_LONG).show();					}else{						/*						 * 1.set the nickname and sex in local and website						 * 2.change the password ,the local too						 */						Toast.makeText(myFragmentView.getContext(), "change ps and post the info to website", Toast.LENGTH_LONG).show();					}				}else{					/*					 * set the nickname and sex in local and website					 */										Toast.makeText(myFragmentView.getContext(), "post the info to website", Toast.LENGTH_LONG).show();				}							}		});		//Datepicker			}	@Override	public void onClick(View v) {		// TODO Auto-generated method stub			}	@Override	public boolean onLongClick(View v) {		// TODO Auto-generated method stub		return false;	}	//get user current	public void SaveUC(String username,String password,boolean flag) {	    preferences = this.getActivity().getSharedPreferences("usercurrent", Activity.MODE_PRIVATE);	    SharedPreferences.Editor preferencesEditor = preferences.edit();	    preferencesEditor.putString("username", username);	    preferencesEditor.putString("password", password);	    preferencesEditor.putBoolean("flag", flag);	    preferencesEditor.commit();	}	public String Rt_username(){		preferences = this.getActivity().getSharedPreferences("usercurrent", Activity.MODE_PRIVATE);	    return preferences.getString("username", null);	}			public String Rt_password(){		preferences = this.getActivity().getSharedPreferences("usercurrent", Activity.MODE_PRIVATE);	    return preferences.getString("password", null);	}		public boolean Rt_flag(){		preferences = this.getActivity().getSharedPreferences("usercurrent", Activity.MODE_PRIVATE);		return preferences.getBoolean("flag", false);	}}